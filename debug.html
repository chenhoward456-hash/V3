<!DOCTYPE html>
<html>
<head>
    <title>承鈞美麗儀表板 - 錯誤檢查</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background-color: #F9F9FB;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        .error {
            background: #fee;
            border: 1px solid #fcc;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }
        .success {
            background: #efe;
            border: 1px solid #cfc;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }
        .code {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        .console {
            background: #1e1e1e1;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 16px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>承鈞美麗儀表板 - 錯誤檢查</h1>
    
    <div id="status"></div>
    
    <div class="console">
        <h3>瀏覽器控制台</h3>
        <p>請打開瀏覽器開發者工具（按 F12），查看 Console 選誤訊息。</p>
        <p>如果有錯誤，請告訴我具體的錯誤訊息。</p>
    </div>
    
    <div class="code">
        <h3>測試按鈕</h3>
        <button onclick="testPage()">測試頁面載入</button>
        <button onclick="testData()">測試數據載入</button>
        <button onclick="testComponents()">測試元件渲染</button>
    </div>
    
    <script>
        let pageError = null;
        let dataError = null;
        let componentError = null;
        
        function updateStatus() {
            const status = document.getElementById('status');
            let html = '';
            
            if (pageError) {
                html += '<div class="error"><h3>頁面載入錯誤</h3><p>' + pageError + '</p></div>';
            }
            
            if (dataError) {
                html += '<div class="error"><h3>數據載入錯誤</h3><p>' + dataError + '</p></div>';
            }
            
            if (componentError) {
                html += '<div class="error"><h3>元件渲染錯誤</h3><p>' + componentError + '</p></div>';
            }
            
            if (!pageError && !dataError && !componentError) {
                html += '<div class="success"><h3>✅ 頁面正常載入</h3><p>所有功能正常</p></div>';
            }
            
            status.innerHTML = html;
        }
        
        // 測試頁面載入
        function testPage() {
            try {
                console.log('測試頁面載入...');
                pageError = null;
                updateStatus();
                console.log('✅ 頁面載入測試完成');
            } catch (error) {
                console.error('❌ 頁面載入錯誤:', error);
                pageError = error.message;
                updateStatus();
            }
        }
        
        // 測試數據載入
        function testData() {
            try {
                console.log('測試數據載入...');
                const metrics = [
                    { id: 'hcy', name: '同半胱胺酸', current: 12.5, target: 8.0, unit: 'μmol/L', description: '心血管健康指標' },
                    { id: 'ferritin', name: '鐵蛋白', current: 45, target: 50, unit: 'ng/mL', description: '鐵質儲存指標' }
                ];
                
                console.log('✅ 數據載入測試完成:', metrics);
                dataError = null;
                updateStatus();
            } catch (error) {
                console.error('❌ 數據載入錯誤:', error);
                dataError = error.message;
                updateStatus();
            }
        }
        
        // 測試元件渲染
        function testComponents() {
            try {
                console.log('測試元件渲染...');
                // 測試基本的 DOM 操作
                const div = document.createElement('div');
                div.innerHTML = '<h3>測試元件</h3><p>元件渲染測試</p>';
                document.body.appendChild(div);
                
                // 測試事件綁定
                const button = document.createElement('button');
                button.textContent = '測試按鈕';
                button.onclick = () => {
                    console.log('按鈕點擊測試');
                };
                document.body.appendChild(button);
                
                console.log('✅ 元件渲染測試完成');
                componentError = null;
                updateStatus();
            } catch (error) {
                console.error('❌ 元件渲染錯誤:', error);
                componentError = error.message;
                updateStatus();
            }
        }
        
        // 頁面載入時自動測試
        window.addEventListener('load', () => {
            console.log('頁面開始載入...');
            setTimeout(() => {
                testPage();
                testData();
                testComponents();
            }, 1000);
        });
        
        // 錯誤處理
        window.addEventListener('error', (event) => {
            console.error('全局錯誤:', event.error);
            pageError = event.error.message;
            updateStatus();
        });
        
        // 未處理的 Promise 拒絕
        window.addEventListener('unhandledrejection', (event) => {
            console.error('未處理的 Promise 錯誤:', event.reason);
            pageError = event.reason;
            updateStatus();
        });
    </script>
</body>
</html>
